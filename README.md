# BMW_OBC
BMW_OBC E34 
üöò BMW E34 DIGITAL OBC ‚Äî –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è (–í–µ—Ä—Å–∏—è 40)
–≠—Ç–æ –∫–∞—Å—Ç–æ–º–Ω—ã–π –±–æ—Ä—Ç–æ–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä –Ω–∞ –±–∞–∑–µ ESP32, —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥ –∏–Ω—Ç–µ—Ä—å–µ—Ä BMW E34 (—è–Ω—Ç–∞—Ä–Ω–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞, —Å—Ç—Ä–æ–≥–∏–µ —à—Ä–∏—Ñ—Ç—ã). –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω—è–µ—Ç —à—Ç–∞—Ç–Ω—ã–µ —á–∞—Å—ã/–ë–ö, –¥–æ–±–∞–≤–ª—è—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Wi-Fi.
üõ† 1. –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —á–∞—Å—Ç—å (–ñ–µ–ª–µ–∑–æ)
–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä: ESP32 (2-—è–¥–µ—Ä–Ω—ã–π, 240 –ú–ì—Ü, Wi-Fi/BT).
–î–∏—Å–ø–ª–µ–π: TFT 3.5" –∏–ª–∏ 4.0" (–¥—Ä–∞–π–≤–µ—Ä ST7796/ILI9488), —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 480x320.
–ó–≤—É–∫: –ú–æ–¥—É–ª—å DFPlayer Mini + SD –∫–∞—Ä—Ç–∞ (–∑–≤—É–∫–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è, –∫–ª–∏–∫–∏, —Ç—Ä–µ–≤–æ–≥–∏).
–ß–∞—Å—ã: –ú–æ–¥—É–ª—å RTC DS3231 (–¥–µ—Ä–∂–∏—Ç –≤—Ä–µ–º—è –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º –∑–∞–∂–∏–≥–∞–Ω–∏–∏).
–î–∞—Ç—á–∏–∫–∏:
–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –±–æ—Ä—Ç—Å–µ—Ç–∏ (—á–µ—Ä–µ–∑ –¥–µ–ª–∏—Ç–µ–ª—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –ø–∏–Ω 4).
–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è/–º–∞—Å–ª–∞ (DS18B20).
–û–±–æ—Ä–æ—Ç—ã (RPM) –∏ –°–∫–æ—Ä–æ—Å—Ç—å (–∏–º–ø—É–ª—å—Å—ã —Å –ø—Ä–∏–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ –æ–ø—Ç–æ–ø–∞—Ä—ã).
–ú–∏–∫—Ä–æ—Ñ–æ–Ω (–¥–ª—è —ç–∫–≤–∞–ª–∞–π–∑–µ—Ä–∞).
üìå –†–∞—Å–ø–∏–Ω–æ–≤–∫–∞ (Pinout):
–î–∏—Å–ø–ª–µ–π (SPI): SCLK: 12, MOSI: 11, MISO: 40, DC: 38, CS: 10, RST: 39, BLK (–ü–æ–¥—Å–≤–µ—Ç–∫–∞): 42.
–ó–≤—É–∫ (UART): RX: 16, TX: 17.
I2C (–ß–∞—Å—ã DS3231): SDA: 1, SCL: 2.
–í—Ö–æ–¥—ã:
RPM (–¢–∞—Ö–æ–º–µ—Ç—Ä): GPIO 5 (–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ).
SPEED (–°–ø–∏–¥–æ–º–µ—Ç—Ä): GPIO 34 (–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ).
VOLT (–í–æ–ª—å—Ç–º–µ—Ç—Ä): GPIO 4 (–∞–Ω–∞–ª–æ–≥–æ–≤—ã–π).
MIC (–ú–∏–∫—Ä–æ—Ñ–æ–Ω): GPIO 3 (–∞–Ω–∞–ª–æ–≥–æ–≤—ã–π).
BUTTON (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ): GPIO 15 (–ø–æ–¥—Ç—è–Ω—É—Ç –∫ –ø–∏—Ç–∞–Ω–∏—é).
TEMP (DS18B20): GPIO 21.
üñ• 2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏ –†–µ–∂–∏–º—ã –≠–∫—Ä–∞–Ω–∞
–°–∏—Å—Ç–µ–º–∞ –∏–º–µ–µ—Ç 8 —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—ã—Ö –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π (–∫–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ).
MAIN DASH (–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω):
–°–ª–µ–≤–∞: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (—Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π: —Å–∏–Ω–∏–π <60¬∞C, –∫—Ä–∞—Å–Ω—ã–π >105¬∞C).
–°–ø—Ä–∞–≤–∞: –í–æ–ª—å—Ç–∞–∂ (—Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º: <12V –∏–ª–∏ >14.8V).
–í–Ω–∏–∑—É: –°—Ç–∞—Ç—É—Å –±–∞—Ä (–ß–∞—Å—ã, Wi-Fi —Å–∏–≥–Ω–∞–ª, –¢–æ—á–Ω—ã–π –≤–æ–ª—å—Ç–∞–∂).
ANALOG CLOCK (–ß–∞—Å—ã):
–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —á–∞—Å—ã –≤ —Å—Ç–∏–ª–µ BMW.
–Ø–Ω—Ç–∞—Ä–Ω–∞—è —Å–µ–∫—É–Ω–¥–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞.
COOLANT TEMP (–ë–æ–ª—å—à–æ–π —Ç–µ—Ä–º–æ–º–µ—Ç—Ä):
–î–µ—Ç–∞–ª—å–Ω–∞—è —à–∫–∞–ª–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã —Å —Ä–∏—Å–∫–∞–º–∏.
BATTERY VOLTAGE (–ë–æ–ª—å—à–æ–π –≤–æ–ª—å—Ç–º–µ—Ç—Ä):
–î–µ—Ç–∞–ª—å–Ω–∞—è —à–∫–∞–ª–∞ –∑–∞—Ä—è–¥–∞ –ê–ö–ë.
ENGINE SPEED (–¢–∞—Ö–æ–º–µ—Ç—Ä):
–¶–∏—Ñ—Ä–æ–≤–æ–π –∏ –∞–Ω–∞–ª–æ–≥–æ–≤—ã–π —Ç–∞—Ö–æ–º–µ—Ç—Ä.
–ö—Ä–∞—Å–Ω–∞—è –∑–æ–Ω–∞ –ø–æ—Å–ª–µ 6000 –æ–±/–º–∏–Ω.
SERVICE INTERVAL (–°–µ—Ä–≤–∏—Å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª):
–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è "–∫—É–±–∏–∫–æ–≤" BMW (–∑–µ–ª–µ–Ω—ã–µ -> –∂–µ–ª—Ç—ã–π -> –∫—Ä–∞—Å–Ω—ã–π).
–°—á–∏—Ç–∞–µ—Ç –º–æ—Ç–æ—á–∞—Å—ã –¥–≤–∏–≥–∞—Ç–µ–ª—è (—É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ RPM > 300).
–§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞: –î–æ–ª–≥–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ (10 —Å–µ–∫) —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–∞—Å–ª–∞ (Oil Reset).
ACOUSTIC (–≠–∫–≤–∞–ª–∞–π–∑–µ—Ä):
8-–ø–æ–ª–æ—Å–Ω—ã–π —Å–ø–µ–∫—Ç—Ä–æ–∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä, —Ä–µ–∞–≥–∏—Ä—É—é—â–∏–π –Ω–∞ –º—É–∑—ã–∫—É –≤ —Å–∞–ª–æ–Ω–µ —á–µ—Ä–µ–∑ –º–∏–∫—Ä–æ—Ñ–æ–Ω.
WEATHER (–ü–æ–≥–æ–¥–∞):
–ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Wi-Fi (Open-Meteo API).
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç: –ì–æ—Ä–æ–¥, –ò–∫–æ–Ω–∫—É –ø–æ–≥–æ–¥—ã, –û–ø–∏—Å–∞–Ω–∏–µ (–Ø—Å–Ω–æ/–î–æ–∂–¥—å), –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤–æ–∑–¥—É—Ö–∞.
SYSTEM STATUS:
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç IP –∞–¥—Ä–µ—Å, —Ç–µ–∫—É—â–∏–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –¥–∞—Ç—á–∏–∫–æ–≤.
üåê 3. Web-–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞)
–ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ Wi-Fi ("arduino" / "12345678"), –º–æ–∂–Ω–æ –∑–∞–π—Ç–∏ –ø–æ IP –∞–¥—Ä–µ—Å—É –ø–ª–∞—Ç—ã –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤: –ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø—Ä—è–º–æ–≥–æ –≤—ã–±–æ—Ä–∞ —ç–∫—Ä–∞–Ω–∞.
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —è—Ä–∫–æ—Å—Ç–∏: –ü–æ–ª–∑—É–Ω–æ–∫ —è—Ä–∫–æ—Å—Ç–∏ + –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–ê–≤—Ç–æ" (–¥–µ–Ω—å/–Ω–æ—á—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏).
–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞: –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–∫–∞–∑–∞–Ω–∏–π –í–æ–ª—å—Ç–∞–∂–∞, –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ RPM (–µ—Å–ª–∏ –≤—Ä—É—Ç).
GitHub Update: –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—à–∏–≤–∫–∏ "–ø–æ –≤–æ–∑–¥—É—Ö—É".
üõ° 4. –°–∏—Å—Ç–µ–º—ã –∑–∞—â–∏—Ç—ã –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
–í –≤–µ—Ä—Å–∏—é V40 –≤–Ω–µ–¥—Ä–µ–Ω—ã –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏:
Watchdog Timer (–°—Ç–æ—Ä–æ–∂–µ–≤–æ–π –ø—ë—Å):
–ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≤–∏—Å–Ω–µ—Ç –æ—Ç –ø–æ–º–µ—Ö –∑–∞–∂–∏–≥–∞–Ω–∏—è –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 8 —Å–µ–∫—É–Ω–¥, –æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è.
Soft Start (–ü–ª–∞–≤–Ω—ã–π –ø—É—Å–∫):
–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∑–∞–∂–∏–≥–∞–Ω–∏—è —ç–∫—Ä–∞–Ω –∑–∞–≥–æ—Ä–∞–µ—Ç—Å—è —Ç—É—Å–∫–ª–æ (—è—Ä–∫–æ—Å—Ç—å 70), —á—Ç–æ–±—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–∫–∞—á–æ–∫ —Ç–æ–∫–∞. –ü–æ–ª–Ω–∞—è —è—Ä–∫–æ—Å—Ç—å –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ (Brownout).
–§–æ–Ω–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Wi-Fi:
–ü—Ä–∏–±–æ—Ä—ã –≤–∫–ª—é—á–∞—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏. Wi-Fi –∏—â–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è —Ä–∞–±–æ—Ç—É —Ç–∞—Ö–æ–º–µ—Ç—Ä–∞ –∏ –¥–∞—Ç—á–∏–∫–æ–≤.
–ê–Ω—Ç–∏-–¥—Ä–µ–±–µ–∑–≥ (Debounce):
–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –∫–Ω–æ–ø–∫–∏ –∏—Å–∫–ª—é—á–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –¥–≤–æ–π–Ω—ã–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤.
OTA Updates (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ –≤–æ–∑–¥—É—Ö—É):
–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–æ—à–∏–≤–∫—É –±–µ–∑ —Å–Ω—è—Ç–∏—è –ø—Ä–∏–±–æ—Ä–Ω–æ–π –ø–∞–Ω–µ–ª–∏ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–∞–±–µ–ª—è, —Å–∫–∞—á–∏–≤–∞—è .bin —Ñ–∞–π–ª –Ω–∞–ø—Ä—è–º—É—é —Å —Ç–≤–æ–µ–≥–æ GitHub.
üé¨ 5. –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
Start-up Animation: –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —Ä–∏—Å—É–µ—Ç—Å—è –ª–æ–≥–æ—Ç–∏–ø M POWER, –∑–∞—Ç–µ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç Gauge Sweep (—Ç–µ—Å—Ç —Å—Ç—Ä–µ–ª–æ–∫: —à–∫–∞–ª—ã –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–æ –º–∞–∫—Å–∏–º—É–º–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –Ω–∞–∑–∞–¥), –∫–∞–∫ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ø–æ—Ä—Ç–∫–∞—Ä–∞—Ö.
–®—Ä–∏—Ñ—Ç: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ç–∫–∏–π, —á–∏—Ç–∞–µ–º—ã–π —à—Ä–∏—Ñ—Ç FreeSansBold, —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥ –ø—Ä–∏–±–æ—Ä—ã.
